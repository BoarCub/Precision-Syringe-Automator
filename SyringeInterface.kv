WindowManager:
    MainWindow:
    NewRoutineWindow:
    NewTaskWindow:
    SaveFileWindow:
    FileChooserWindow:
    LineByLineWindow:
    ExecuteFileWindow:
        id: execute_file_window
    DisplayFileWindow:
        id: display_file_window
        
#Main Menu
<MainWindow>:
    name: "Welcome"
    BoxLayout:
        size_hint: .5, None
        height: 250
        pos_hint: {'center_x': .5}
        orientation: 'vertical'
        Button: #Create New Routine Button
            text: "Create New Routine"
            on_release: app.root.current = "New Task" #Changes Screen to Routine Creator on Click
        Button:
            text: "Line-by-Line"
            on_release: app.root.current = "New Task" #Changes Screen to Routine Creator on Click
        Button: #Load Previous File Button
            text: "Load Previous File"
            on_release: app.root.current = "File Chooser Window" #Changes Screen to File Chooser Window on Click

<LineByLineWindow>:
    name: "Line By Line"

#Handles Interface for Choosing a File
<FileChooserWindow>:
    name: "File Chooser Window"
    size: self.size
    pos: self.pos
    BoxLayout: #File Chooser Layout
        orientation: 'vertical'

        BoxLayout: #Displays All of the Files
            size_hint_y: None
            size: self.size
            pos: self.pos
        FileChooserIconView
            path: root.getPath()
            on_selection: root.selectedFile = root.selectFile(*args) #Gets Selected File
        BoxLayout: #Layout Containing Navigational Buttons
            size_hint: .5, None
            height: 100
            pos_hint: {'center_x': .5}
            orientation: 'vertical'
            Button: #Choose File Button
                text: "Choose File"
                on_release: root.updateDisplay(app.root.ids.display_file_window) #Updates the table of Actions in File/Routine
                on_release: app.root.current = "Show File" #Switches screen to Show File
            Button: #Cancel Button, Returns to Main Menu
                text: "Cancel"
                on_release: app.root.current = "Welcome"
#Display File Window, Has a Table of Actions in a File/Routine
<SaveFileWindow>:
    name: "Save File"
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            path: root.getPath()
            id: filechooser
            #on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            hint_text: "File Name"
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: app.root.current = "New Task"

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)
<DisplayFileWindow>:
    name: "Show File"
    BoxLayout: #The Table, Which is Updated with Actions
        id: display_box
        size_hint: .5, None
        height: 300
        pos_hint: {'top': 1, 'center_x': 0.5}
        orientation: 'vertical'
    BoxLayout: #Layout Containing Navigational Buttons
        size_hint: .5, None
        height: 100
        pos_hint: {'center_x': .5}
        orientation: 'vertical'
        Button: #Button Returns to File Chooser Window
            text: "Choose other file"
            on_release: app.root.current = "File Chooser Window"
        Button:
            text: "Execute File"
            on_release: app.root.current = "Execute File"
            on_release: app.root.ids.execute_file_window.startLoop()

<ExecuteFileWindow>:
    name: "Execute File"
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: queryLabel
            text: "Checking..."
        Button:
            text: "end"
            on_release: root.stopLoop()
            on_release: app.root.current = "Show File"


#New Task Windows Handles the Creation of a New Task
<NewTaskWindow>:
    name: "New Task"

    GridLayout:
        id: grid
        cols: 3
        row_force_default: True
        col_force_default: False
        row_default_height: 60
        col_default_width: 100
        pos_hint: {'center_x': .5, 'top': 0.9}
        spacing: 10

    #BoxLayout:
     #   orientation: 'vertical'
      #  size_hint: None, None
       # size: 150, 60
        #pos_hint: {'center_x': 0.5, 'top': 1}
        #Spinner:
        #    id: spinner_mode
         #   text: 'Mode'
          #  values: ['Input', 'Output']
           # on_text: root.clickMode(spinner_mode.text)
        #Spinner:
         #   id: spinner_action
          #  text: 'Action'
           # values: root.getUserCommands()
            #on_text: root.clickAction(spinner_action.text)

    BoxLayout:
        size_hint: .3, 0.1
        height: 600
        pos_hint: {'center_x': .5}
        orientation: 'vertical'
        Button:
            text: "Add Task"
            on_release: root.addEmptyTask()
        Button:
            text: "Save File"
            on_release: app.root.current = "Save File"
        Button: #Button Goes Back to New Routine
            text: "Go Back"
            on_release: app.root.current = "Welcome"

